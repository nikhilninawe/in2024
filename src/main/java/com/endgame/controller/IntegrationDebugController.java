package com.endgame.controller;

import com.endgame.dto.IntegrationRequest;
import com.endgame.dto.IntegrationRequestResponse;
import com.endgame.repository.IntegrationRequestRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

import javax.annotation.PostConstruct;
import java.util.List;

@RestController
public class IntegrationDebugController {
    private final IntegrationRequestRepository repository;

    public IntegrationDebugController(@Autowired IntegrationRequestRepository requestRepository) {
        this.repository = requestRepository;
    }

    @PostConstruct
    public void init() {
        repository.deleteAll();
        IntegrationRequest request = new IntegrationRequest();
        request.businessId = 109;
        request.context = "SHIPMENT";
        request.method = "POST";
        request.timestamp = 1734080330389L;
        request.userId = 9687;
        request.nonce = "f190075a-9476-47e4-89fc-26dab1715d70";
        request.payload = "{\"id\":87049652,\"_operation\":1,\"globalRoute\":[{\"id\":210255621,\"segmentSequence\":0,\"sequence\":0,\"appointment\":{\"date\":\"2024-12-13T14:00:00Z\",\"timeZone\":\"America/New_York\",\"flex\":1062000,\"hasTime\":true},\"deleted\":false,\"_operation\":1},{\"id\":210255622,\"segmentSequence\":0,\"sequence\":1,\"appointment\":{\"date\":\"2024-12-14T14:00:00Z\",\"timeZone\":\"America/New_York\",\"flex\":1062000,\"hasTime\":true},\"deleted\":false,\"_operation\":1}],\"use_routing_guide\":false,\"shipmentCheckId\":0}".replace("\"", "");;
        IntegrationRequestResponse response1 = new IntegrationRequestResponse();
        response1.requestUrl = "PUT https://api.hubtran.com/tms/turvo/shipments";
        response1.requestPayload = "{\"margin\":{\"amount\":100.0,\"value\":183.96},\"endDate\":{\"date\":\"2024-12-14T14:00:00.000Z\",\"flex\":1062000,\"timeZone\":\"America/New_York\"},\"customerOrder\":[{\"costs\":{\"totalAmount\":183.96,\"lineItem\":[{\"amount\":110.0,\"billable\":true,\"deleted\":false,\"id\":49466092,\"notes\":\"32 C41493-Eastern Flat Bed HookUp Fee\",\"price\":110,\"qty\":1,\"code\":{\"id\":135431,\"key\":\"1600\",\"value\":\"Freight - flat\"}},{\"amount\":73.96,\"billable\":true,\"deleted\":false,\"id\":49466093,\"notes\":\"33 C41493-Eastern Flat Bed Transport Mileage Fee (26 to 50)\",\"price\":1.72,\"qty\":43,\"code\":{\"id\":135432,\"key\":\"1601\",\"value\":\"Freight - per mile\"}}],\"subTotal\":183.96,\"totalTax\":0},\"customer\":{\"id\":130270,\"name\":\"Ally Financial Inc.\",\"owner\":{\"id\":2038,\"name\":\"Shannon Lapointe\"}},\"id\":83190775,\"deleted\":false,\"externalIds\":[{\"deleted\":false,\"id\":667436782,\"type\":{\"id\":135426,\"key\":\"1400\",\"value\":\"PO number\"},\"value\":\"VIN: 7JRBR0FM4NG157992, SLID: 5147469\"},{\"deleted\":false,\"id\":667436783,\"type\":{\"id\":120772,\"key\":\"1407\",\"value\":\"OrderId\"},\"value\":\"1352613\"}],\"items\":[{\"isHazmat\":false,\"deleted\":false,\"deliveryLocation\":[{\"name\":\"ADESA BOSTON\",\"id\":214873506,\"globalShipLocationId\":210255622}],\"dimensions\":{\"height\":56.6,\"width\":80.3,\"length\":187.4,\"units\":{\"key\":\"1530\"}},\"id\":135773711,\"vin\":{\"make\":\"Volvo\",\"model\":\"S60 Recharge\",\"id\":\"7JRBR0FM4NG157992\",\"wheelbase\":113.1,\"year\":2022},\"name\":\"7JRBR0FM4NG157992\",\"notes\":\"RequestBy: Remarketing.transmission@ally.com | LineOfBusiness: REPO | RepoDate: 00/Fr/yyyy\",\"pickupLocation\":[{\"name\":\"TRI STATE RECOVERY\",\"id\":214873505,\"globalShipLocationId\":210255621}],\"qty\":1,\"unit\":{\"key\":\"6029\",\"value\":\"vehicle\",\"id\":142214},\"itemNumber\":\"228061745083\",\"netWeight\":{\"weight\":4447}}],\"totalMiles\":43.0,\"route\":[{\"address\":{\"city\":\"Taunton\",\"country\":\"US\",\"longitude\":-71.1214564,\"lat\":41.8633537,\"id\":\"fb268862-55be-4f36-bc25-ba8807a6e599\",\"line1\":\"66 South St\",\"state\":\"MA\",\"zip\":\"02780-4357\"},\"appointment\":{\"start\":\"2024-12-11T14:00:00.000Z\",\"flex\":975600,\"timeZone\":\"America/New_York\",\"scheduling\":{\"value\":\"FCFS (first come, first served)\",\"id\":102461,\"key\":\"9400\"}},\"deleted\":false,\"notes\":\"INOP(NO KEYS); OK TO RELEASE *NO DAMAGE* MUST CALL 24HRS AHEAD & 1HR OUT FOR PU; 833-877-5454 / PU HRS; By appt\",\"location\":{\"id\":20272544,\"name\":\"TRI STATE RECOVERY\"},\"sequence\":0,\"id\":214873505,\"stopType\":{\"id\":100056,\"key\":\"1500\",\"value\":\"Pickup\"}},{\"address\":{\"city\":\"FRAMINGHAM\",\"country\":\"United States\",\"longitude\":-71.4065937,\"lat\":42.2684141,\"id\":\"2f3487b5-799b-4a6a-bf1a-999b974f4717\",\"line1\":\"63 Western Avenue\",\"state\":\"MA\",\"zip\":\"01702\"},\"appointment\":{\"start\":\"2024-12-12T14:00:00.000Z\",\"flex\":975600,\"timeZone\":\"America/New_York\",\"scheduling\":{\"value\":\"FCFS (first come, first served)\",\"id\":102461,\"key\":\"9400\"}},\"deleted\":false,\"notes\":\"Vehicle must check in under as ALLY, must leave paperwork in vehicle stating ALLY. Must have signature, stamp or picture. Damaged units must have pictures. VEHICLES MUST BE CHECKED IN UNDER AS ALLY FINANCIAL. | Phone: 508-270-5446\",\"location\":{\"id\":622462,\"name\":\"ADESA BOSTON\"},\"phone\":\"5086267000\",\"poNumbers\":[\"VEHICLES MUST BE CHECKED IN UNDER AS ALLY FINANCIAL\"],\"sequence\":1,\"id\":214873506,\"stopType\":{\"id\":100057,\"key\":\"1501\",\"value\":\"Delivery\"}}],\"paysUnloading\":false}],\"equipment\":[{\"temp\":0,\"tempUnits\":{\"value\":\"℉\",\"key\":\"1510\"},\"weight\":0,\"weightUnits\":{\"value\":\"lb\",\"key\":\"1520\"},\"deleted\":false,\"id\":94216866,\"type\":{\"key\":\"1209\",\"value\":\"Auto transport\",\"id\":100034}}],\"maxPay\":195,\"type\":{\"id\":100214,\"key\":\"5000\",\"value\":\"FTL\"},\"customId\":\"31579-45337\",\"tags\":{\"value\":[\"NeedsAAISSecure\",\"needspq\",\"CLEAN\",\"inop\",\"inopnokeys\",\"Marketplace\",\"HOT\",\"manuallyposted\"]},\"totalPayableAmount\":0.0,\"globalRoute\":[{\"name\":\"TRI STATE RECOVERY\",\"id\":210255621,\"schedulingType\":{\"key\":\"9400\",\"value\":\"FCFS (first come, first served)\"},\"address\":{\"city\":\"Taunton\",\"state\":\"MA\",\"countryName\":\"US\",\"countryCode\":\"US\",\"line1\":\"66 South St\",\"longitude\":-71.1214564,\"lat\":41.8633537},\"stopType\":{\"key\":\"1500\",\"value\":\"Pickup\"},\"timezone\":\"America/New_York\",\"location\":{\"id\":20272544},\"segmentId\":\"4cb1d2b1-5718-42f2-b3dd-fab3e2525d8d\",\"segmentSequence\":0,\"sequence\":0,\"state\":\"OPEN\",\"appointment\":{\"date\":\"2024-12-13T14:00:00.000Z\",\"timeZone\":\"America/New_York\",\"flex\":1062000,\"hasTime\":true},\"stop_level_fragment_distance\":0,\"originalAppointmentDate\":{\"appointment\":{\"date\":\"2024-11-04T14:00:00.000Z\",\"flex\":370800,\"timeZone\":\"America/New_York\"},\"schedulingType\":{\"value\":\"FCFS (first come, first served)\",\"key\":\"9400\"}},\"plannedDate\":{\"appointment\":{\"date\":\"2024-11-04T14:00:00.000Z\",\"flex\":370800,\"timeZone\":\"America/New_York\"},\"schedulingType\":{\"value\":\"FCFS (first come, first served)\",\"key\":\"9400\"}},\"plannedRequestedDate\":{\"schedulingType\":{\"value\":\"FCFS (first come, first served)\",\"key\":\"9400\",\"id\":102461},\"appointment\":{\"from\":{\"date\":\"2024-12-12T14:00:00.000Z\",\"flex\":370800,\"timeZone\":\"America/New_York\"},\"to\":{\"date\":\"2024-12-12T21:00:00.000Z\",\"flex\":0,\"timeZone\":\"America/New_York\"}}},\"notes\":\"INOP(NO KEYS); OK TO RELEASE *NO DAMAGE* MUST CALL 24HRS AHEAD & 1HR OUT FOR PU; 833-877-5454 / PU HRS; By appt\",\"customerOrder\":[{\"customerId\":130270,\"id\":83190775,\"deleted\":false}],\"deleted\":false,\"fragmentDistance\":{\"value\":43,\"units\":{\"key\":\"1540\",\"value\":\"mi\"}},\"layoverTime\":{\"value\":0,\"units\":{\"key\":\"9900\",\"value\":\"hours\"}}},{\"name\":\"ADESA BOSTON\",\"id\":210255622,\"schedulingType\":{\"key\":\"9400\",\"value\":\"FCFS (first come, first served)\"},\"address\":{\"city\":\"FRAMINGHAM\",\"state\":\"MA\",\"countryName\":\"United States\",\"countryCode\":\"US\",\"line1\":\"63 Western Avenue\",\"longitude\":-71.4065937,\"lat\":42.2684141},\"stopType\":{\"key\":\"1501\",\"value\":\"Delivery\"},\"timezone\":\"America/New_York\",\"location\":{\"id\":622462},\"segmentId\":\"4cb1d2b1-5718-42f2-b3dd-fab3e2525d8d\",\"segmentSequence\":0,\"sequence\":1,\"state\":\"OPEN\",\"appointment\":{\"date\":\"2024-12-14T14:00:00.000Z\",\"timeZone\":\"America/New_York\",\"flex\":1062000,\"hasTime\":true},\"stop_level_fragment_distance\":43,\"originalAppointmentDate\":{\"appointment\":{\"date\":\"2024-11-05T13:00:00.000Z\",\"flex\":399600,\"timeZone\":\"America/New_York\"},\"schedulingType\":{\"value\":\"FCFS (first come, first served)\",\"key\":\"9400\"}},\"plannedDate\":{\"appointment\":{\"date\":\"2024-11-05T13:00:00.000Z\",\"flex\":399600,\"timeZone\":\"America/New_York\"},\"schedulingType\":{\"value\":\"FCFS (first come, first served)\",\"key\":\"9400\"}},\"plannedRequestedDate\":{\"schedulingType\":{\"value\":\"FCFS (first come, first served)\",\"key\":\"9400\",\"id\":102461},\"appointment\":{\"from\":{\"date\":\"2024-12-16T13:00:00.000Z\",\"flex\":399600,\"timeZone\":\"America/New_York\"},\"to\":{\"date\":\"2024-12-17T04:00:00.000Z\",\"flex\":0,\"timeZone\":\"America/New_York\"}}},\"poNumbers\":[\"VEHICLES MUST BE CHECKED IN UNDER AS ALLY FINANCIAL\"],\"notes\":\"Vehicle must check in under as ALLY, must leave paperwork in vehicle stating ALLY. Must have signature, stamp or picture. Damaged units must have pictures. VEHICLES MUST BE CHECKED IN UNDER AS ALLY FINANCIAL. | Phone: 508-270-5446\",\"customerOrder\":[{\"customerId\":130270,\"id\":83190775,\"deleted\":false}],\"deleted\":false,\"fragmentDistance\":{\"value\":43,\"units\":{\"key\":\"1540\",\"value\":\"mi\"}},\"layoverTime\":{\"value\":0,\"units\":{\"key\":\"9900\",\"value\":\"hours\"}}}],\"totalReceivableAmount\":183.96,\"id\":87049652,\"contributors\":[{\"deleted\":false,\"id\":41994767,\"contributorUser\":{\"name\":\"Susie Integration User (SVC)\",\"id\":9687},\"title\":{\"key\":\"shipment-contributor.broker\",\"value\":\"Broker\"}}],\"modeInfo\":[{\"id\":55640532,\"segmentId\":\"4cb1d2b1-5718-42f2-b3dd-fab3e2525d8d\",\"mode\":{\"key\":\"24105\",\"value\":\"TL\"},\"serviceType\":{\"key\":\"24304\",\"value\":\"Any\"}}],\"lane\":{\"end\":\"FRAMINGHAM, MA\",\"start\":\"Taunton, MA\"},\"startDate\":{\"date\":\"2024-12-13T14:00:00.000Z\",\"timeZone\":\"America/New_York\",\"flex\":0},\"status\":{\"code\":{\"key\":\"2101\",\"value\":\"Tendered\",\"id\":100161},\"notes\":\"RPM Vehicles - Expired in Marketplace\"}}".replace("\"", "");;
        response1.responseCode = "200";
        response1.responsePayload = "{\"ok\":true}";

        IntegrationRequestResponse response2 = new IntegrationRequestResponse();
        response2.requestUrl = "POST https://func-rpm-inbound-webhooks-prod.azurewebsites.net/api/turvo?code=vp0IVYRDKkXErrxixOgqGlInl-HoyImvD5JOi9jDVKtHAzFuaMKcNQ%3D%3D";
        response2.requestPayload = "{\"tenantId\":\"109\",\"eventName\":\"SHIPMENT_UPDATE\",\"eventTime\":\"2024-12-13T08:58:52.354Z\",\"eventPayload\":{\"id\":87049652,\"customId\":\"31579-45337\",\"customerOrder\":[{\"costs\":{\"totalAmount\":183.96,\"lineItem\":[{\"amount\":110.0,\"billable\":true,\"deleted\":false,\"id\":49466092,\"notes\":\"32 C41493-Eastern Flat Bed HookUp Fee\",\"price\":110,\"qty\":1,\"code\":{\"id\":135431,\"key\":\"1600\",\"value\":\"Freight - flat\"}},{\"amount\":73.96,\"billable\":true,\"deleted\":false,\"id\":49466093,\"notes\":\"33 C41493-Eastern Flat Bed Transport Mileage Fee (26 to 50)\",\"price\":1.72,\"qty\":43,\"code\":{\"id\":135432,\"key\":\"1601\",\"value\":\"Freight - per mile\"}}],\"subTotal\":183.96,\"totalTax\":0},\"customer\":{\"id\":130270,\"name\":\"Ally Financial Inc.\",\"owner\":{\"id\":2038,\"name\":\"Shannon Lapointe\"}},\"id\":83190775,\"deleted\":false,\"externalIds\":[{\"deleted\":false,\"id\":667436782,\"type\":{\"id\":135426,\"key\":\"1400\",\"value\":\"PO number\"},\"value\":\"VIN: 7JRBR0FM4NG157992, SLID: 5147469\"},{\"deleted\":false,\"id\":667436783,\"type\":{\"id\":120772,\"key\":\"1407\",\"value\":\"OrderId\"},\"value\":\"1352613\"}],\"items\":[{\"isHazmat\":false,\"deleted\":false,\"deliveryLocation\":[{\"name\":\"ADESA BOSTON\",\"id\":214873506,\"globalShipLocationId\":210255622}],\"dimensions\":{\"height\":56.6,\"width\":80.3,\"length\":187.4,\"units\":{\"key\":\"1530\"}},\"id\":135773711,\"vin\":{\"make\":\"Volvo\",\"model\":\"S60 Recharge\",\"id\":\"7JRBR0FM4NG157992\",\"wheelbase\":113.1,\"year\":2022},\"name\":\"7JRBR0FM4NG157992\",\"notes\":\"RequestBy: Remarketing.transmission@ally.com | LineOfBusiness: REPO | RepoDate: 00/Fr/yyyy\",\"pickupLocation\":[{\"name\":\"TRI STATE RECOVERY\",\"id\":214873505,\"globalShipLocationId\":210255621}],\"qty\":1,\"unit\":{\"key\":\"6029\",\"value\":\"vehicle\",\"id\":142214},\"itemNumber\":\"228061745083\",\"netWeight\":{\"weight\":4447}}],\"totalMiles\":43.0,\"route\":[{\"address\":{\"city\":\"Taunton\",\"country\":\"US\",\"longitude\":-71.1214564,\"lat\":41.8633537,\"id\":\"fb268862-55be-4f36-bc25-ba8807a6e599\",\"line1\":\"66 South St\",\"state\":\"MA\",\"zip\":\"02780-4357\"},\"appointment\":{\"start\":\"2024-12-11T14:00:00.000Z\",\"flex\":975600,\"timeZone\":\"America/New_York\",\"scheduling\":{\"value\":\"FCFS (first come, first served)\",\"id\":102461,\"key\":\"9400\"}},\"deleted\":false,\"notes\":\"INOP(NO KEYS); OK TO RELEASE *NO DAMAGE* MUST CALL 24HRS AHEAD & 1HR OUT FOR PU; 833-877-5454 / PU HRS; By appt\",\"location\":{\"id\":20272544,\"name\":\"TRI STATE RECOVERY\"},\"sequence\":0,\"id\":214873505,\"stopType\":{\"id\":100056,\"key\":\"1500\",\"value\":\"Pickup\"}},{\"address\":{\"city\":\"FRAMINGHAM\",\"country\":\"United States\",\"longitude\":-71.4065937,\"lat\":42.2684141,\"id\":\"2f3487b5-799b-4a6a-bf1a-999b974f4717\",\"line1\":\"63 Western Avenue\",\"state\":\"MA\",\"zip\":\"01702\"},\"appointment\":{\"start\":\"2024-12-12T14:00:00.000Z\",\"flex\":975600,\"timeZone\":\"America/New_York\",\"scheduling\":{\"value\":\"FCFS (first come, first served)\",\"id\":102461,\"key\":\"9400\"}},\"deleted\":false,\"notes\":\"Vehicle must check in under as ALLY, must leave paperwork in vehicle stating ALLY. Must have signature, stamp or picture. Damaged units must have pictures. VEHICLES MUST BE CHECKED IN UNDER AS ALLY FINANCIAL. | Phone: 508-270-5446\",\"location\":{\"id\":622462,\"name\":\"ADESA BOSTON\"},\"phone\":\"5086267000\",\"poNumbers\":[\"VEHICLES MUST BE CHECKED IN UNDER AS ALLY FINANCIAL\"],\"sequence\":1,\"id\":214873506,\"stopType\":{\"id\":100057,\"key\":\"1501\",\"value\":\"Delivery\"}}],\"customerPO\":\"\",\"paysUnloading\":false,\"lane\":{}}],\"endDate\":{\"date\":\"2024-12-14T14:00:00.000Z\",\"flex\":1062000,\"timeZone\":\"America/New_York\"},\"equipment\":[{\"temp\":0,\"tempUnits\":{\"value\":\"℉\",\"key\":\"1510\"},\"weight\":0,\"weightUnits\":{\"value\":\"lb\",\"key\":\"1520\"},\"deleted\":false,\"id\":94216866,\"type\":{\"key\":\"1209\",\"value\":\"Auto transport\",\"id\":100034}}],\"contributors\":[{\"deleted\":false,\"id\":41994767,\"contributorUser\":{\"name\":\"Susie Integration User (SVC)\",\"id\":9687},\"title\":{\"key\":\"shipment-contributor.broker\",\"value\":\"Broker\"}}],\"globalRoute\":[{\"name\":\"TRI STATE RECOVERY\",\"id\":210255621,\"schedulingType\":{\"key\":\"9400\",\"value\":\"FCFS (first come, first served)\"},\"address\":{\"city\":\"Taunton\",\"state\":\"MA\",\"countryName\":\"US\",\"countryCode\":\"US\",\"line1\":\"66 South St\",\"longitude\":-71.1214564,\"lat\":41.8633537},\"stopType\":{\"key\":\"1500\",\"value\":\"Pickup\"},\"timezone\":\"America/New_York\",\"location\":{\"id\":20272544},\"segmentId\":\"4cb1d2b1-5718-42f2-b3dd-fab3e2525d8d\",\"segmentSequence\":0,\"sequence\":0,\"state\":\"OPEN\",\"appointment\":{\"date\":\"2024-12-13T14:00:00.000Z\",\"timeZone\":\"America/New_York\",\"flex\":1062000,\"hasTime\":true},\"stop_level_fragment_distance\":0,\"originalAppointmentDate\":{\"appointment\":{\"date\":\"2024-11-04T14:00:00.000Z\",\"flex\":370800,\"timeZone\":\"America/New_York\"},\"schedulingType\":{\"value\":\"FCFS (first come, first served)\",\"key\":\"9400\"}},\"plannedDate\":{\"appointment\":{\"date\":\"2024-11-04T14:00:00.000Z\",\"flex\":370800,\"timeZone\":\"America/New_York\"},\"schedulingType\":{\"value\":\"FCFS (first come, first served)\",\"key\":\"9400\"}},\"plannedRequestedDate\":{\"schedulingType\":{\"value\":\"FCFS (first come, first served)\",\"key\":\"9400\",\"id\":102461},\"appointment\":{\"from\":{\"date\":\"2024-12-12T14:00:00.000Z\",\"flex\":370800,\"timeZone\":\"America/New_York\"},\"to\":{\"date\":\"2024-12-12T21:00:00.000Z\",\"flex\":0,\"timeZone\":\"America/New_York\"}}},\"notes\":\"INOP(NO KEYS); OK TO RELEASE *NO DAMAGE* MUST CALL 24HRS AHEAD & 1HR OUT FOR PU; 833-877-5454 / PU HRS; By appt\",\"customerOrder\":[{\"customerId\":130270,\"id\":83190775,\"deleted\":false}],\"deleted\":false,\"fragmentDistance\":{\"value\":43,\"units\":{\"key\":\"1540\",\"value\":\"mi\"}},\"layoverTime\":{\"value\":0,\"units\":{\"key\":\"9900\",\"value\":\"hours\"}}},{\"name\":\"ADESA BOSTON\",\"id\":210255622,\"schedulingType\":{\"key\":\"9400\",\"value\":\"FCFS (first come, first served)\"},\"address\":{\"city\":\"FRAMINGHAM\",\"state\":\"MA\",\"countryName\":\"United States\",\"countryCode\":\"US\",\"line1\":\"63 Western Avenue\",\"longitude\":-71.4065937,\"lat\":42.2684141},\"stopType\":{\"key\":\"1501\",\"value\":\"Delivery\"},\"timezone\":\"America/New_York\",\"location\":{\"id\":622462},\"segmentId\":\"4cb1d2b1-5718-42f2-b3dd-fab3e2525d8d\",\"segmentSequence\":0,\"sequence\":1,\"state\":\"OPEN\",\"appointment\":{\"date\":\"2024-12-14T14:00:00.000Z\",\"timeZone\":\"America/New_York\",\"flex\":1062000,\"hasTime\":true},\"stop_level_fragment_distance\":43,\"originalAppointmentDate\":{\"appointment\":{\"date\":\"2024-11-05T13:00:00.000Z\",\"flex\":399600,\"timeZone\":\"America/New_York\"},\"schedulingType\":{\"value\":\"FCFS (first come, first served)\",\"key\":\"9400\"}},\"plannedDate\":{\"appointment\":{\"date\":\"2024-11-05T13:00:00.000Z\",\"flex\":399600,\"timeZone\":\"America/New_York\"},\"schedulingType\":{\"value\":\"FCFS (first come, first served)\",\"key\":\"9400\"}},\"plannedRequestedDate\":{\"schedulingType\":{\"value\":\"FCFS (first come, first served)\",\"key\":\"9400\",\"id\":102461},\"appointment\":{\"from\":{\"date\":\"2024-12-16T13:00:00.000Z\",\"flex\":399600,\"timeZone\":\"America/New_York\"},\"to\":{\"date\":\"2024-12-17T04:00:00.000Z\",\"flex\":0,\"timeZone\":\"America/New_York\"}}},\"poNumbers\":[\"VEHICLES MUST BE CHECKED IN UNDER AS ALLY FINANCIAL\"],\"notes\":\"Vehicle must check in under as ALLY, must leave paperwork in vehicle stating ALLY. Must have signature, stamp or picture. Damaged units must have pictures. VEHICLES MUST BE CHECKED IN UNDER AS ALLY FINANCIAL. | Phone: 508-270-5446\",\"customerOrder\":[{\"customerId\":130270,\"id\":83190775,\"deleted\":false}],\"deleted\":false,\"fragmentDistance\":{\"value\":43,\"units\":{\"key\":\"1540\",\"value\":\"mi\"}},\"layoverTime\":{\"value\":0,\"units\":{\"key\":\"9900\",\"value\":\"hours\"}}}],\"modeInfo\":[{\"id\":55640532,\"segmentId\":\"4cb1d2b1-5718-42f2-b3dd-fab3e2525d8d\",\"mode\":{\"key\":\"24105\",\"value\":\"TL\"},\"serviceType\":{\"key\":\"24304\",\"value\":\"Any\"}}],\"lane\":{\"end\":\"FRAMINGHAM, MA\",\"start\":\"Taunton, MA\"},\"margin\":{\"amount\":100.0,\"value\":183.96},\"maxPay\":195,\"totalPayableAmount\":0.0,\"totalReceivableAmount\":183.96,\"type\":{\"id\":100214,\"key\":\"5000\",\"value\":\"FTL\"},\"startDate\":{\"date\":\"2024-12-13T14:00:00.000Z\",\"timeZone\":\"America/New_York\",\"flex\":0},\"status\":{\"code\":{\"key\":\"2101\",\"value\":\"Tendered\",\"id\":100161},\"notes\":\"RPM Vehicles - Expired in Marketplace\",\"updatedBy\":{\"id\":9687,\"photo\":\"/uploads/Production/109/user/user_9687_1530114628736\"}},\"tags\":{\"value\":[\"NeedsAAISSecure\",\"needspq\",\"CLEAN\",\"inop\",\"inopnokeys\",\"Marketplace\",\"HOT\",\"manuallyposted\"]}}}".replace("\"", "");;
        response2.responseCode = "200";
        response2.responsePayload = "";
        request.integrationRequestResponses = List.of(response1, response2);

        request.errors = List.of("Invalid Payload", "NPE while processing request");
        repository.save(request);
    }

    @GetMapping("/integration_request")
    public List<IntegrationRequest> getIntegrationRequest(@RequestParam(value = "busId") long busId) {
        return repository.findByBusinessId(busId);
    }

    @GetMapping("/integration_request_between_timestamps")
    public List<IntegrationRequest> getIntegrationRequestBetweenTimestamps(@RequestParam(value = "start") long start,
                                                                           @RequestParam(value = "end") long end,
                                                                           @RequestParam(value = "busId") long busId) {
        return repository.findByTimestampBetweenAndBusinessId(start, end, busId);
    }
}
